basePath: /api
definitions:
  controllers.MessageResponseType:
    properties:
      message:
        type: string
    type: object
  models.AuthInput:
    properties:
      name:
        type: string
      password:
        type: string
    required:
    - name
    - password
    type: object
  models.Bracket:
    properties:
      countMatches:
        type: integer
      rounds:
        items:
          $ref: '#/definitions/models.Round'
        type: array
    type: object
  models.CreateTiktok:
    properties:
      name:
        type: string
      url:
        type: string
    required:
    - name
    - url
    type: object
  models.CreateTournament:
    properties:
      name:
        type: string
      size:
        maximum: 64
        minimum: 4
        type: integer
      tiktoks:
        items:
          $ref: '#/definitions/models.CreateTiktok'
        type: array
    required:
    - name
    - tiktoks
    type: object
  models.EditTournament:
    properties:
      name:
        type: string
      size:
        maximum: 64
        minimum: 4
        type: integer
      tiktoks:
        items:
          $ref: '#/definitions/models.CreateTiktok'
        type: array
    required:
    - name
    - tiktoks
    type: object
  models.Match:
    properties:
      firstOption: {}
      matchID:
        type: string
      secondOption: {}
    type: object
  models.Round:
    properties:
      matches:
        items:
          $ref: '#/definitions/models.Match'
        type: array
      round:
        type: integer
    type: object
  models.Tiktok:
    properties:
      name:
        type: string
      tournament:
        $ref: '#/definitions/models.Tournament'
      tournamentID:
        type: string
      url:
        type: string
      wins:
        type: integer
    type: object
  models.Tournament:
    properties:
      id:
        type: string
      name:
        type: string
      size:
        type: integer
      timesPlayed:
        type: integer
      user:
        $ref: '#/definitions/models.User'
      userID:
        type: string
    type: object
  models.TournamentIds:
    properties:
      tournamentIds:
        items:
          type: string
        type: array
    required:
    - tournamentIds
    type: object
  models.TournamentsResponse:
    properties:
      tournamentCount:
        type: integer
      tournaments:
        items:
          $ref: '#/definitions/models.Tournament'
        type: array
    required:
    - tournamentCount
    - tournaments
    type: object
  models.User:
    properties:
      id:
        type: string
      name:
        type: string
      password:
        type: string
    type: object
  models.UserAuthDetails:
    properties:
      id:
        type: string
      token:
        type: string
      username:
        type: string
    type: object
host: localhost:8000
info:
  contact: {}
  description: API for TikTok arena application
  title: TikTok arena API
  version: "1.0"
paths:
  /auth/login:
    post:
      consumes:
      - application/json
      description: Login user with given credentials
      parameters:
      - description: Data to login user
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/models.AuthInput'
      produces:
      - application/json
      responses:
        "200":
          description: Login success
          schema:
            $ref: '#/definitions/models.UserAuthDetails'
        "400":
          description: Error logging in
          schema:
            $ref: '#/definitions/controllers.MessageResponseType'
      summary: Login user
      tags:
      - auth
  /auth/register:
    post:
      consumes:
      - application/json
      description: Register new user with given credentials
      parameters:
      - description: Data to register user
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/models.AuthInput'
      produces:
      - application/json
      responses:
        "200":
          description: Register success
          schema:
            $ref: '#/definitions/models.UserAuthDetails'
        "400":
          description: Failed to register user
          schema:
            $ref: '#/definitions/controllers.MessageResponseType'
      summary: Register user
      tags:
      - auth
  /auth/whoami:
    get:
      consumes:
      - application/json
      description: Get current user id and name
      produces:
      - application/json
      responses:
        "200":
          description: User details
          schema:
            $ref: '#/definitions/models.UserAuthDetails'
        "400":
          description: Error getting user data
          schema:
            $ref: '#/definitions/controllers.MessageResponseType'
      security:
      - ApiKeyAuth: []
      summary: Authenticated user details
      tags:
      - auth
  /tournament:
    get:
      consumes:
      - application/json
      description: Get all tournaments
      parameters:
      - description: page number
        in: query
        name: page
        type: string
      - description: page size
        in: query
        name: count
        type: string
      - description: sort page by name
        in: query
        name: sort_name
        type: string
      - description: sort page by size
        in: query
        name: sort_size
        type: string
      - description: search
        in: query
        name: search
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Contest bracket
          schema:
            items:
              $ref: '#/definitions/models.TournamentsResponse'
            type: array
        "400":
          description: Failed to return tournament contest
          schema:
            $ref: '#/definitions/controllers.MessageResponseType'
      summary: All tournaments
      tags:
      - tournament
  /tournament/{tournamentId}:
    get:
      consumes:
      - application/json
      description: Get tournament details by its id
      parameters:
      - description: Tournament id
        in: path
        name: tournamentId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Tournament
          schema:
            $ref: '#/definitions/models.Tournament'
        "400":
          description: Tournament not found
          schema:
            $ref: '#/definitions/controllers.MessageResponseType'
      summary: Tournament details
      tags:
      - tournament
    post:
      consumes:
      - application/json
      description: Increment wins and increment times_played
      parameters:
      - description: Data to update tournament winner
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/models.CreateTournament'
      produces:
      - application/json
      responses:
        "200":
          description: Winner updated
          schema:
            $ref: '#/definitions/controllers.MessageResponseType'
        "400":
          description: Error during winner updating
          schema:
            $ref: '#/definitions/controllers.MessageResponseType'
      security:
      - ApiKeyAuth: []
      summary: Update tournament winner statistics
      tags:
      - tournament
  /tournament/contest/{tournamentId}:
    get:
      consumes:
      - application/json
      description: Get tournament contest
      parameters:
      - description: Tournament id
        in: path
        name: tournamentId
        required: true
        type: string
      - in: query
        name: contestType
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Contest bracket
          schema:
            $ref: '#/definitions/models.Bracket'
        "400":
          description: Failed to return tournament contest
          schema:
            $ref: '#/definitions/controllers.MessageResponseType'
      summary: Tournament contest
      tags:
      - tournament
  /tournament/create:
    post:
      consumes:
      - application/json
      description: Create new tournament for current user
      parameters:
      - description: Data to create tournament
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/models.CreateTournament'
      produces:
      - application/json
      responses:
        "200":
          description: Tournament created
          schema:
            $ref: '#/definitions/controllers.MessageResponseType'
        "400":
          description: Error during tournament creation
          schema:
            $ref: '#/definitions/controllers.MessageResponseType'
      security:
      - ApiKeyAuth: []
      summary: Create new tournament
      tags:
      - tournament
  /tournament/delete:
    delete:
      consumes:
      - application/json
      description: Delete tournaments for current user
      parameters:
      - description: Data to delete tournaments
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/models.TournamentIds'
      produces:
      - application/json
      responses:
        "200":
          description: Tournaments deleted
          schema:
            $ref: '#/definitions/controllers.MessageResponseType'
        "400":
          description: Error during tournaments deletion
          schema:
            $ref: '#/definitions/controllers.MessageResponseType'
      security:
      - ApiKeyAuth: []
      summary: Delete tournaments
      tags:
      - tournament
  /tournament/delete/{tournamentId}:
    delete:
      consumes:
      - application/json
      description: Delete tournament for current user
      produces:
      - application/json
      responses:
        "200":
          description: Tournament deleted
          schema:
            $ref: '#/definitions/controllers.MessageResponseType'
        "400":
          description: Error during tournament deletion
          schema:
            $ref: '#/definitions/controllers.MessageResponseType'
      security:
      - ApiKeyAuth: []
      summary: Delete tournament
      tags:
      - tournament
  /tournament/edit/{tournamentId}:
    post:
      consumes:
      - application/json
      description: Edit tournament for current user
      parameters:
      - description: Data to edit tournament
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/models.EditTournament'
      produces:
      - application/json
      responses:
        "200":
          description: Tournament edited
          schema:
            $ref: '#/definitions/controllers.MessageResponseType'
        "400":
          description: Error during tournament edition
          schema:
            $ref: '#/definitions/controllers.MessageResponseType'
      security:
      - ApiKeyAuth: []
      summary: Edit tournament
      tags:
      - tournament
  /tournament/tiktoks/{tournamentId}:
    get:
      consumes:
      - application/json
      description: Get tournament tiktoks
      parameters:
      - description: Tournament id
        in: path
        name: tournamentId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Tournament tiktoks
          schema:
            items:
              $ref: '#/definitions/models.Tiktok'
            type: array
        "400":
          description: Tournament not found
          schema:
            $ref: '#/definitions/controllers.MessageResponseType'
      summary: Tournament tiktoks
      tags:
      - tournament
  /user/tournaments:
    get:
      consumes:
      - application/json
      description: Create new tournament for current user
      parameters:
      - description: page number
        in: query
        name: page
        type: string
      - description: page size
        in: query
        name: count
        type: string
      - description: sort page by name
        in: query
        name: sort_name
        type: string
      - description: sort page by size
        in: query
        name: sort_size
        type: string
      - description: search
        in: query
        name: search
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Tournaments of user
          schema:
            $ref: '#/definitions/models.TournamentsResponse'
        "400":
          description: Couldn't get tournaments for specific user
          schema:
            $ref: '#/definitions/controllers.MessageResponseType'
      security:
      - ApiKeyAuth: []
      summary: Create new tournament
      tags:
      - user
swagger: "2.0"
